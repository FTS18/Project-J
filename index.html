<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" href="assets/css/theme.css">
        <link rel="stylesheet" href="assets/css/style.css">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link
            href="https://fonts.googleapis.com/css2?family=Mona+Sans:ital,wght@0,200..900;1,200..900&display=swap"
            rel="stylesheet">
        <title>Project J</title>
        <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-database-compat.js"></script>
        <script src="assets/scripts/app.js"></script>
        <script src="/worker.js"></script>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4591937669588444"
        crossorigin="anonymous"></script>
        
    </head>
    <body><a class="button1" href="#main">
        <svg class="svgIcon1" viewBox="0 0 384 512">
          <path
            d="M214.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 141.2V448c0 17.7 14.3 32 32 32s32-14.3 32-32V141.2L329.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160z"
          ></path>
        </svg>
      </a>
      
        <section class="nav">
            <div class="navcontent">Project-J
            <a class="button" href="https://ananay.netlify.app">
                <svg class="svgIcon" viewBox="0 0 512 512" height="1em" xmlns="http://www.w3.org/2000/svg"><path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm50.7-186.9L162.4 380.6c-19.4 7.5-38.5-11.6-31-31l55.5-144.3c3.3-8.5 9.9-15.1 18.4-18.4l144.3-55.5c19.4-7.5 38.5 11.6 31 31L325.1 306.7c-3.2 8.5-9.9 15.1-18.4 18.4zM288 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"></path></svg>
               More
             </a>
             <!--<button id="darkModeToggle">Dark Mode</button></div>-->
        </section>
        <section class="main" id="main">
            <section class="slider">
                <div class="container"></div>
                <div class="main-title">JEE Mains <br><span class="gg"><span class="yy">2025</span> College</span> <br> Predictor</div>                 
            </section>
            <section class="area1">
                <div class="form">
                    <input type="number" id="marks" name="rank"
                        class="input" placeholder="Rank (CRL)">
                    <input type="number" id="perc" name="%ile" min="0" max="99.99999"
                            class="input" placeholder="or Percentile">
                    <!--<input type="text" id="percentile" name="percentile"
                        required class="input" placeholder="Percentile">-->

                    <div class="container1">
                        <label for="state">Home State</label>
                        <select id="state" name="state" class="state-select"
                            required>
                        </select>
                        <div class="mydict"><div>
                                <label>
                                    <input type="radio" name="gender"
                                        value="Gender-Neutral" checked>
                                    <span>Male</span>
                                </label>
                                <label>
                                    <input type="radio" name="gender"
                                        value="Female-only (including Supernumerary)">
                                    <span>Female</span>
                                </label>
                                <label>
                                    <input type="radio" name="gender"
                                        value="Female-only (including Supernumerary)">
                                    <span>Others</span>
                                </label>
                            </div></div>
                        <div class="mydict">
                            <div>
                                <label>
                                    <input type="radio" name="category"
                                        value="EWS" checked>
                                    <span>EWS</span>
                                </label>
                                <label>
                                    <input type="radio" name="category"
                                        value="OBC-NCL">
                                    <span>OBC</span>
                                </label>
                                <label>
                                    <input type="radio" name="category"
                                        value="SC">
                                    <span>SC</span>
                                </label>
                                <label>
                                    <input type="radio" name="category"
                                        value="ST">
                                    <span>ST</span>
                                </label>
                                <label>
                                    <input type="radio" name="category"
                                        value="OPEN" checked>
                                    <span>OPEN</span>
                                </label>
                            </div> <div class="mydict">
                                <label>
                                    <input type="checkbox" name="nit"
                                        value="NIT">
                                    <span>NIT</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="iiit"
                                        value="IIIT">
                                    <span>IIIT</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="gfti"
                                        value="GFTI">
                                    <span>GFTI</span>
                                </label>
                            </div>
                            <div class="mydict">
                                <label>
                                    <input type="text" id="search" name="search"
                                        class="input inp1" placeholder="Specific City/Branch">  
                                </label>
                                <div class="info">
                                    Note: For now I have only compiled JoSSA's data here. Haven't added CSAB/JACDelhi/AkTU/MhTCET/ COMEDK/other counsellings ka data yet. So keep this in mind while using this predictor!
                                    <br><span class="ff">Asuvidha ke liye khed haiii!</span>
                                </div>
                            </div>
                        </div><!--<select id="branch" name="branch"
                            class="state-select">
                            <option value="Select Branch">Coming
                                Soon</option>
                            <option value="Computer Science">Computer Science</option>
                            <option value="Mechanical Engineering">Mechanical Engineering</option>
                            <option value="Electrical Engineering">Electrical Engineering</option>
                            <option value="Civil Engineering">Civil Engineering</option>
                        --> </select>

                    </div>
                    <div class="button-container">
                        <button class="custom-button">
                            <div class="button-content">
                                <span>Continue</span>
                                <svg
                                    class="button-icon"
                                    xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 20 20"
                                    fill="currentColor">
                                    <path
                                        fill-rule="evenodd"
                                        d="M8.22 5.22a.75.75 0 011.06 0l4.25 4.25a.75.75 0 010 1.06l-4.25 4.25a.75.75 0 01-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 010-1.06z"
                                        clip-rule="evenodd" />
                                </svg>
                            </div>
                        </button>
                    </div>
                </div>
            </section>
        </section>
        <section class="comment-box">
<div class="comments">
    <h2>Comments</h2>
    <div class="comment-wrapper">
    <input class="inpc" type="text" id="username" placeholder="Enter your name (optional)">
<textarea class="inpc tta" rows="10" cols="50" id="commentBox" placeholder="Share your thoughts" style="resize: none;"></textarea>
<button class="cbutton" onclick="addComment()">Post</button>
<button class="cbutton" onclick="toggleComments()">View</button>
<div id="comments" style="display: none; max-height: 0; overflow-y: auto; transition: max-height 0.3s ease;"></div>
    <div id="comments"></div>
    </div>
</div>
    <script>const apiUrl = "https://script.google.com/macros/s/AKfycbwJlQ2f7hiFFoCxjKWJxgbrq4pt0822r5Iteqi5tOXFryvcLgN7BfXYeFOlJji08ap6FA/exec";
        const usernameColors = {}; // Store username-color mappings
        
        function generateColor(username) {
    if (usernameColors[username]) {
        return usernameColors[username];
    }

    let hash = 0;
    for (let i = 0; i < username.length; i++) {
        hash = username.charCodeAt(i) + ((hash << 5) - hash);
    }

    // Ensure variations by using more bits of the hash
    let r = (hash & 0xFF) % 106 + 160; // Range: 150-255
    let g = ((hash >> 8) & 0xFF) % 160 + 350; // Range: 150-255
    let b = ((hash >> 16) & 0xFF) % 186 + 150; // Range: 150-255

    // Add more variance by using a different hash shift for each component.
    r = (r + ((hash >> 40) & 0x1F) * 3) % 256;
    g = (g + ((hash >> 20) & 0x1F) * 3) % 256;
    b = (b + ((hash >> 196) & 0x1F) * 3) % 256;

    let color = `rgb(${r}, ${g}, ${b})`;
    usernameColors[username] = color;
    return color;
}
        
        async function getHashedUsername() {
            let response = await fetch("https://api64.ipify.org?format=json");
            let data = await response.json();
            let hash = data.ip.split(".").reduce((a, b) => a + parseInt(b), 0);
            const words = ["Shadow", "Pixel", "Cyber", "Neon", "Ghost", "Blue", "Ninja", "Rogue", "Echo", "Solar", "Quantum", "Mystic", "Omega", "Hyper", "Inferno", "Stealth", "Cosmic", "Nova", "Zenith", "Warp"];
            const animals = ["Wolf", "Tiger", "Falcon", "Dragon", "Phoenix", "Panther", "Raven", "Viper", "Lynx", "Cobra", "Hawk", "Jaguar", "Griffin", "Cheetah", "Leopard", "Eagle", "Fox", "Scorpion", "Bear", "Kraken"];
            let randomWord = words[hash % words.length];
            let randomAnimal = animals[hash % animals.length];
            let randomNumber = (hash % 900) + 100;
            return `${randomWord}${randomAnimal}${randomNumber}`;
        }
        
        async function loadComments() {
            let response = await fetch(apiUrl);
            let comments = await response.json();
            document.getElementById("comments").innerHTML = comments.map(c => {
                const color = generateColor(c.username);
                return `<p><b style="color: ${color};">${c.username}</b>: ${c.comment}</p>`;
            }).join("");
        }
        
        async function addComment() {
            let username = document.getElementById("username").value.trim();
            if (!username) {
                username = await getHashedUsername();
            }
            let comment = document.getElementById("commentBox").value.trim();
            if (!comment) {
                alert("Please enter a comment!");
                return;
            }
            await fetch(apiUrl, {
                method: "POST",
                body: JSON.stringify({ username, comment })
            });document.getElementById("commentBox").value = "";
    loadComments();
    if (!commentsVisible){ //only toggle if the comments are not already visible.
        toggleComments(); // Toggle comments after posting
    } else {
        loadComments(); //if already visible, just reload the comments.
    }
        }
let commentsVisible = false;

function toggleComments() {
    const commentsDiv = document.getElementById("comments");
    if (commentsVisible) {
        commentsDiv.style.maxHeight = "0";
        setTimeout(() => {
            commentsDiv.style.display = "none";
        }, 300); // Wait for transition to complete
    } else {
        commentsDiv.style.display = "block";
        commentsDiv.style.maxHeight = "50vh";
        loadComments();
    }
    commentsVisible = !commentsVisible;
}

window.onload = function() {
    // Leave comments initially hidden
};
    </script>
        </section>
        <section class="footer">
           <center> Made with ❤ by <a href="https://github.com/fts18">Ananay</a> | &nbsp;<span id="year"></span> &nbsp;<br><span class="arr">All Rights Reserved.</span>
           </center> <div id="vcc">
                    <p id="vct"></p>
                </div>
            </div>
        </section>
        <script> const button = document.querySelector('.button1');

            window.addEventListener('scroll', function() {
                if (window.scrollY >= window.innerHeight * 1.25) {
                    button.style.display = 'flex';  // Show the button
                } else {
                    button.style.display = 'none';   // Hide the button
                }document.addEventListener("DOMContentLoaded", function () {
    const stateDropdown = document.getElementById("state");

    if (!stateDropdown) {
        console.error("Dropdown element #state not found!");
        return;
    }

    populateStates();
});
            });
        const darkModeToggle = document.getElementById('darkModeToggle');
        const body = document.body;

        darkModeToggle.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            darkModeToggle.classList.toggle('dark-mode');
            if (body.classList.contains('dark-mode')){
                darkModeToggle.textContent = "Light Mode";
            } else{
                darkModeToggle.textContent = "Dark Mode";
            }
        });</script>
            <script src="https://api.ipify.org?format=jsonp&callback=get_viewers_ip"></script>
    </body>
</html>
